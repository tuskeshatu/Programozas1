<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Basics of Programming 1 Homework (Kovacs Levente F5UHYT): itra_calc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Basics of Programming 1 Homework (Kovacs Levente F5UHYT)<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Route planner and ITRA-score calculator</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('itra__calc_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">itra_calc.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Route planner with ITRA-score calculation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;debugmalloc.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoordinates.html">coordinates</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinates definition.  <a href="structcoordinates.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpoint.html">point</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Point definition.  <a href="structpoint.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpoint__list.html">point_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">List for points (nodes)  <a href="structpoint__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structedge.html">edge</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edge definition.  <a href="structedge.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structedges__list.html">edges_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edges in a linked list coming into a certain node (Used by Dijkstra)  <a href="structedges__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6b20d41d6252e9871430c242cb1a56e7" id="r_a6b20d41d6252e9871430c242cb1a56e7"><td class="memItemLeft" align="right" valign="top"><a id="a6b20d41d6252e9871430c242cb1a56e7" name="a6b20d41d6252e9871430c242cb1a56e7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BUFFER_SIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a6b20d41d6252e9871430c242cb1a56e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527a1e3c352381ec3fcf00cfb8bfd5ed" id="r_a527a1e3c352381ec3fcf00cfb8bfd5ed"><td class="memItemLeft" align="right" valign="top"><a id="a527a1e3c352381ec3fcf00cfb8bfd5ed" name="a527a1e3c352381ec3fcf00cfb8bfd5ed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RADIUS_OF_EARTH</b>&#160;&#160;&#160;6371.0</td></tr>
<tr class="separator:a527a1e3c352381ec3fcf00cfb8bfd5ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59be80d1d80fc8a9dbfe8d823dbbac74" id="r_a59be80d1d80fc8a9dbfe8d823dbbac74"><td class="memItemLeft" align="right" valign="top"><a id="a59be80d1d80fc8a9dbfe8d823dbbac74" name="a59be80d1d80fc8a9dbfe8d823dbbac74"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ERR_COLOR</b>&#160;&#160;&#160;&quot;\033[1;31m&quot;</td></tr>
<tr class="memdesc:a59be80d1d80fc8a9dbfe8d823dbbac74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Red color ANSI escape code for stderr outputs. <br /></td></tr>
<tr class="separator:a59be80d1d80fc8a9dbfe8d823dbbac74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade48c7e2e47b62c4ba5b651a8fce44d7" id="r_ade48c7e2e47b62c4ba5b651a8fce44d7"><td class="memItemLeft" align="right" valign="top"><a id="ade48c7e2e47b62c4ba5b651a8fce44d7" name="ade48c7e2e47b62c4ba5b651a8fce44d7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>WARN_COLOR</b>&#160;&#160;&#160;&quot;\033[1;33m&quot;</td></tr>
<tr class="memdesc:ade48c7e2e47b62c4ba5b651a8fce44d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yellow color ANSI escape code for user warnings. <br /></td></tr>
<tr class="separator:ade48c7e2e47b62c4ba5b651a8fce44d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4bdeb73d33895bb745d17b3d8539a6a" id="r_ac4bdeb73d33895bb745d17b3d8539a6a"><td class="memItemLeft" align="right" valign="top"><a id="ac4bdeb73d33895bb745d17b3d8539a6a" name="ac4bdeb73d33895bb745d17b3d8539a6a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GREEN_COLOR</b>&#160;&#160;&#160;&quot;\033[1;32m&quot;</td></tr>
<tr class="memdesc:ac4bdeb73d33895bb745d17b3d8539a6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Green color ANSI escape code for signaling correct operation. <br /></td></tr>
<tr class="separator:ac4bdeb73d33895bb745d17b3d8539a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb3e24b0191a3b06d8dfc41506a81dd" id="r_aadb3e24b0191a3b06d8dfc41506a81dd"><td class="memItemLeft" align="right" valign="top"><a id="aadb3e24b0191a3b06d8dfc41506a81dd" name="aadb3e24b0191a3b06d8dfc41506a81dd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INPUT_COLOR</b>&#160;&#160;&#160;&quot;\033[1;36m&quot;</td></tr>
<tr class="memdesc:aadb3e24b0191a3b06d8dfc41506a81dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cyan color ANSI escape code for asking for user input. <br /></td></tr>
<tr class="separator:aadb3e24b0191a3b06d8dfc41506a81dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d724ff30124b3ce91f377afb4598ed7" id="r_a5d724ff30124b3ce91f377afb4598ed7"><td class="memItemLeft" align="right" valign="top"><a id="a5d724ff30124b3ce91f377afb4598ed7" name="a5d724ff30124b3ce91f377afb4598ed7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INFO_COLOR</b>&#160;&#160;&#160;&quot;\033[1m&quot;</td></tr>
<tr class="memdesc:a5d724ff30124b3ce91f377afb4598ed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bold style ANSI escape code for all other outputs. <br /></td></tr>
<tr class="separator:a5d724ff30124b3ce91f377afb4598ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c3b975e5552a122f836b02fa138502" id="r_ad7c3b975e5552a122f836b02fa138502"><td class="memItemLeft" align="right" valign="top"><a id="ad7c3b975e5552a122f836b02fa138502" name="ad7c3b975e5552a122f836b02fa138502"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RESET_COLOR</b>&#160;&#160;&#160;&quot;\033[0m&quot;</td></tr>
<tr class="memdesc:ad7c3b975e5552a122f836b02fa138502"><td class="mdescLeft">&#160;</td><td class="mdescRight">ANSI escape code to reset terminal color to default. <br /></td></tr>
<tr class="separator:ad7c3b975e5552a122f836b02fa138502"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aece42006e59e830731fa49885f6f1202" id="r_aece42006e59e830731fa49885f6f1202"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#aece42006e59e830731fa49885f6f1202">destroy_edges</a> (<a class="el" href="structedges__list.html">edges_list</a> **head)</td></tr>
<tr class="memdesc:aece42006e59e830731fa49885f6f1202"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees up linked list of edges.  <br /></td></tr>
<tr class="separator:aece42006e59e830731fa49885f6f1202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a777592a0ad74f6572c8f106ebad69025" id="r_a777592a0ad74f6572c8f106ebad69025"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a> (<a class="el" href="structpoint__list.html">point_list</a> **head)</td></tr>
<tr class="memdesc:a777592a0ad74f6572c8f106ebad69025"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees up linked list of points (with sentinel).  <br /></td></tr>
<tr class="separator:a777592a0ad74f6572c8f106ebad69025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f9754bb75e2b21d82c88e4833e6c2ca" id="r_a4f9754bb75e2b21d82c88e4833e6c2ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a4f9754bb75e2b21d82c88e4833e6c2ca">is_in_list</a> (<a class="el" href="structpoint__list.html">point_list</a> *head, <a class="el" href="structpoint__list.html">point_list</a> *to_find)</td></tr>
<tr class="memdesc:a4f9754bb75e2b21d82c88e4833e6c2ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up if a <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a> element is already in the linked list.  <br /></td></tr>
<tr class="separator:a4f9754bb75e2b21d82c88e4833e6c2ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa896a6f73226d761c0f2c4cf3f6b36fe" id="r_aa896a6f73226d761c0f2c4cf3f6b36fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#aa896a6f73226d761c0f2c4cf3f6b36fe">order_merged_edges</a> (<a class="el" href="structpoint__list.html">point_list</a> *to_merge, <a class="el" href="structpoint__list.html">point_list</a> *merge_with, <a class="el" href="structpoint__list.html">point_list</a> *head)</td></tr>
<tr class="memdesc:aa896a6f73226d761c0f2c4cf3f6b36fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fixes incorrect references to a just merged point from edges.  <br /></td></tr>
<tr class="separator:aa896a6f73226d761c0f2c4cf3f6b36fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a4019289b0eb1ed9a96cec4b38bad0b" id="r_a2a4019289b0eb1ed9a96cec4b38bad0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structedges__list.html">edges_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a2a4019289b0eb1ed9a96cec4b38bad0b">get_last_edge</a> (<a class="el" href="structedges__list.html">edges_list</a> *head)</td></tr>
<tr class="memdesc:a2a4019289b0eb1ed9a96cec4b38bad0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up last element in an <a class="el" href="structedges__list.html" title="Edges in a linked list coming into a certain node (Used by Dijkstra)">edges_list</a>.  <br /></td></tr>
<tr class="separator:a2a4019289b0eb1ed9a96cec4b38bad0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a9220ddb43b425386a06c720d6b6e9" id="r_aa0a9220ddb43b425386a06c720d6b6e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#aa0a9220ddb43b425386a06c720d6b6e9">order_list</a> (<a class="el" href="structpoint__list.html">point_list</a> *head)</td></tr>
<tr class="memdesc:aa0a9220ddb43b425386a06c720d6b6e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merge two elements in the list if they represent the same location.  <br /></td></tr>
<tr class="separator:aa0a9220ddb43b425386a06c720d6b6e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a386f4a2407dc7273907be947bd947e08" id="r_a386f4a2407dc7273907be947bd947e08"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a386f4a2407dc7273907be947bd947e08">toRadians</a> (double degree)</td></tr>
<tr class="memdesc:a386f4a2407dc7273907be947bd947e08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert degrees to radians.  <br /></td></tr>
<tr class="separator:a386f4a2407dc7273907be947bd947e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02434d9cbacdb757bbce7d8d872bc5d8" id="r_a02434d9cbacdb757bbce7d8d872bc5d8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance</a> (double lat1, double lon1, double lat2, double lon2)</td></tr>
<tr class="memdesc:a02434d9cbacdb757bbce7d8d872bc5d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the distance between two coordinates.  <br /></td></tr>
<tr class="separator:a02434d9cbacdb757bbce7d8d872bc5d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a560f5c80548ae92bc99fc84f2401f4dc" id="r_a560f5c80548ae92bc99fc84f2401f4dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a560f5c80548ae92bc99fc84f2401f4dc">get_elevation</a> (<a class="el" href="structpoint__list.html">point_list</a> *to_get, FILE *track)</td></tr>
<tr class="memdesc:a560f5c80548ae92bc99fc84f2401f4dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up elevation for <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a> to_get in FILE track.  <br /></td></tr>
<tr class="separator:a560f5c80548ae92bc99fc84f2401f4dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e372ab720467c0b31df14394f5837b5" id="r_a4e372ab720467c0b31df14394f5837b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a4e372ab720467c0b31df14394f5837b5">add_edge_in</a> (<a class="el" href="structpoint__list.html">point_list</a> *to, <a class="el" href="structpoint__list.html">point_list</a> *from, <a class="el" href="structpoint__list.html">point_list</a> *head, FILE *track)</td></tr>
<tr class="memdesc:a4e372ab720467c0b31df14394f5837b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add edges from and to neighbouring intersections (points, nodes).  <br /></td></tr>
<tr class="separator:a4e372ab720467c0b31df14394f5837b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b2601c2b12d651a189170508c975a2" id="r_a41b2601c2b12d651a189170508c975a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a41b2601c2b12d651a189170508c975a2">read_nodes_from_route</a> (<a class="el" href="structpoint__list.html">point_list</a> *head, FILE *route, FILE *track, size_t *idcnt)</td></tr>
<tr class="memdesc:a41b2601c2b12d651a189170508c975a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads nodes from corresponding route file.  <br /></td></tr>
<tr class="separator:a41b2601c2b12d651a189170508c975a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13812af799221713099f955dd7025f4" id="r_af13812af799221713099f955dd7025f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#af13812af799221713099f955dd7025f4">read_points</a> (const char **files, size_t number_routes)</td></tr>
<tr class="memdesc:af13812af799221713099f955dd7025f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function responsible for creating map.  <br /></td></tr>
<tr class="separator:af13812af799221713099f955dd7025f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6ecd81efb77ff5f16afb571c452bed" id="r_a8e6ecd81efb77ff5f16afb571c452bed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a8e6ecd81efb77ff5f16afb571c452bed">nearest_point</a> (<a class="el" href="structpoint.html">point</a> <a class="el" href="structpoint.html">point</a>, <a class="el" href="structpoint__list.html">point_list</a> *head)</td></tr>
<tr class="memdesc:a8e6ecd81efb77ff5f16afb571c452bed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up nearest point in the graph (on the map) to the provided point.  <br /></td></tr>
<tr class="separator:a8e6ecd81efb77ff5f16afb571c452bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9724035b23c8622a2a189d6161591bf" id="r_ae9724035b23c8622a2a189d6161591bf"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#ae9724035b23c8622a2a189d6161591bf">count_points</a> (<a class="el" href="structpoint__list.html">point_list</a> *head)</td></tr>
<tr class="memdesc:ae9724035b23c8622a2a189d6161591bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counts number of points in linked list.  <br /></td></tr>
<tr class="separator:ae9724035b23c8622a2a189d6161591bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627338ccb86565ad1fc4a7ad6d0c520e" id="r_a627338ccb86565ad1fc4a7ad6d0c520e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a627338ccb86565ad1fc4a7ad6d0c520e">calculate_itra</a> (double origin_itra, <a class="el" href="structedge.html">edge</a> <a class="el" href="structedge.html">edge</a>)</td></tr>
<tr class="memdesc:a627338ccb86565ad1fc4a7ad6d0c520e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate ITRA-score for a path consisting of a path to a previous point and an edge from the previous point to the current point.  <br /></td></tr>
<tr class="separator:a627338ccb86565ad1fc4a7ad6d0c520e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7858bc74bf482c2bbec69a07f2078439" id="r_a7858bc74bf482c2bbec69a07f2078439"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a7858bc74bf482c2bbec69a07f2078439">improve_dist</a> (<a class="el" href="structpoint__list.html">point_list</a> *<a class="el" href="structpoint.html">point</a>)</td></tr>
<tr class="memdesc:a7858bc74bf482c2bbec69a07f2078439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to improve on the shortest distance of given point along all of its edges.  <br /></td></tr>
<tr class="separator:a7858bc74bf482c2bbec69a07f2078439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af41632d84b5bd81f642bd5680f224bb0" id="r_af41632d84b5bd81f642bd5680f224bb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#af41632d84b5bd81f642bd5680f224bb0">set_smallest_visited</a> (<a class="el" href="structpoint__list.html">point_list</a> *head)</td></tr>
<tr class="memdesc:af41632d84b5bd81f642bd5680f224bb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets point_list-&gt;<a class="el" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">point.visited</a> 1 for the point with the smallest distance from start which is not visited yet.  <br /></td></tr>
<tr class="separator:af41632d84b5bd81f642bd5680f224bb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd17c2fe52c646a82e3b2814a61c93e" id="r_a0dd17c2fe52c646a82e3b2814a61c93e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#a0dd17c2fe52c646a82e3b2814a61c93e">find_shortest_path</a> (<a class="el" href="structpoint__list.html">point_list</a> *root, <a class="el" href="structpoint__list.html">point_list</a> *points_head)</td></tr>
<tr class="memdesc:a0dd17c2fe52c646a82e3b2814a61c93e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function responsible for Dijkstra and finding shortest path.  <br /></td></tr>
<tr class="separator:a0dd17c2fe52c646a82e3b2814a61c93e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae082408aa13c29b167bf25ad0f22dc40" id="r_ae082408aa13c29b167bf25ad0f22dc40"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#ae082408aa13c29b167bf25ad0f22dc40">print_route</a> (<a class="el" href="structpoint.html">point</a> start_user, <a class="el" href="structpoint.html">point</a> dest_user, <a class="el" href="structpoint__list.html">point_list</a> *map_head)</td></tr>
<tr class="memdesc:ae082408aa13c29b167bf25ad0f22dc40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function responsible for planning and printing route.  <br /></td></tr>
<tr class="separator:ae082408aa13c29b167bf25ad0f22dc40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf9e6b7e6f15df4b525a2e7705ba3089" id="r_abf9e6b7e6f15df4b525a2e7705ba3089"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="itra__calc_8c.html#abf9e6b7e6f15df4b525a2e7705ba3089">main</a> (int argc, char const *argv[])</td></tr>
<tr class="memdesc:abf9e6b7e6f15df4b525a2e7705ba3089"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function. Responsible for: runtime parameters error handling, displaying user info, getting user input for map files and planning parameters, calling read_points and print_route, displaying help information.  <br /></td></tr>
<tr class="separator:abf9e6b7e6f15df4b525a2e7705ba3089"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Route planner with ITRA-score calculation. </p>
<dl class="section author"><dt>Author</dt><dd>Levente Kovacs (F5UHYT) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>4.2 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-12-06 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4e372ab720467c0b31df14394f5837b5" name="a4e372ab720467c0b31df14394f5837b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e372ab720467c0b31df14394f5837b5">&#9670;&#160;</a></span>add_edge_in()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_edge_in </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>track</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add edges from and to neighbouring intersections (points, nodes). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to</td><td>Pointer to the current point (with no edges_in). </td></tr>
    <tr><td class="paramname">from</td><td>Pointer to the already existing point coming before the current point. </td></tr>
    <tr><td class="paramname">head</td><td>Pointer to the sentinel of the linked list of points. </td></tr>
    <tr><td class="paramname">track</td><td>Track .gpx extension xml file. Has coordinates and elevation data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>track.gpx must must contain the correct gps location information (from and to coordinates). </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Status indication: -1 if no edges could be added, 0 if an error occured, 1 in case of success. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  317</span>{</div>
<div class="line"><span class="lineno">  318</span>    <span class="comment">/* Set up edges_in as empty list */</span></div>
<div class="line"><span class="lineno">  319</span>    to-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> = NULL;</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    rewind(track);</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>    <span class="comment">/* Seek to point from (point list *from is the previous element is the list of points, which is either the previously</span></div>
<div class="line"><span class="lineno">  324</span><span class="comment">    read point from the route file, or a point read from another route file. In the latter case, track won&#39;t contain the</span></div>
<div class="line"><span class="lineno">  325</span><span class="comment">    origin point and function will keep edges_in as empty list and return -1) */</span></div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordtype">char</span> buffer[BUFFER_SIZE];</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordtype">double</span> lat, lon, el;</div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordflow">while</span> (1)</div>
<div class="line"><span class="lineno">  330</span>    {</div>
<div class="line"><span class="lineno">  331</span>        <span class="comment">/* Read line by line until node is found*/</span></div>
<div class="line"><span class="lineno">  332</span>        fgets(buffer, BUFFER_SIZE, track);</div>
<div class="line"><span class="lineno">  333</span>        sscanf(strstr(buffer, <span class="stringliteral">&quot;lat&quot;</span>), <span class="stringliteral">&quot;lat=\&quot;%lf\&quot; lon=\&quot;%lf\&quot;&quot;</span>, &amp;lat, &amp;lon);</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>        <span class="comment">/* If node is from break */</span></div>
<div class="line"><span class="lineno">  336</span>        <span class="keywordflow">if</span> (lat == from-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat &amp;&amp; lon == from-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon)</div>
<div class="line"><span class="lineno">  337</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>        <span class="comment">/* If to or EOF is reached, there is no from in track file (return -1) */</span></div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">if</span> ((lat == to-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat &amp;&amp; lon == to-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon &amp;&amp; <a class="code hl_function" href="itra__calc_8c.html#a4f9754bb75e2b21d82c88e4833e6c2ca">is_in_list</a>(head, to) == to) || feof(track))</div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  343</span>    }</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordtype">double</span> dist = 0, up = 0, down = 0, latprev = from-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, lonprev = from-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon, prevel = from-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.el;</div>
<div class="line"><span class="lineno">  346</span>    <span class="keywordflow">while</span> (1)</div>
<div class="line"><span class="lineno">  347</span>    {</div>
<div class="line"><span class="lineno">  348</span>        <span class="comment">/* Read line by line until node is found*/</span></div>
<div class="line"><span class="lineno">  349</span>        fgets(buffer, BUFFER_SIZE, track);</div>
<div class="line"><span class="lineno">  350</span>        sscanf(strstr(buffer, <span class="stringliteral">&quot;lat&quot;</span>), <span class="stringliteral">&quot;lat=\&quot;%lf\&quot; lon=\&quot;%lf\&quot;&quot;</span>, &amp;lat, &amp;lon);</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>        <span class="comment">/* If node is to break */</span></div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">if</span> (lat == to-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat &amp;&amp; lon == to-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon)</div>
<div class="line"><span class="lineno">  354</span>        {</div>
<div class="line"><span class="lineno">  355</span>            <span class="comment">/* Add distance and elevation from last point to currently read point to dist and up or down */</span></div>
<div class="line"><span class="lineno">  356</span>            dist += <a class="code hl_function" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance</a>(latprev, lonprev, lat, lon);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>            <span class="comment">/* Read and add elevation */</span></div>
<div class="line"><span class="lineno">  359</span>            fgets(buffer, BUFFER_SIZE, track);</div>
<div class="line"><span class="lineno">  360</span>            sscanf(strstr(buffer, <span class="stringliteral">&quot;&lt;ele&gt;&quot;</span>), <span class="stringliteral">&quot;&lt;ele&gt;%lf&quot;</span>, &amp;el);</div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordflow">if</span> (el &gt; prevel)</div>
<div class="line"><span class="lineno">  362</span>                up += el - prevel;</div>
<div class="line"><span class="lineno">  363</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  364</span>                down += el - prevel;</div>
<div class="line"><span class="lineno">  365</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  366</span>        }</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>        <span class="comment">/* If EOF is reached, there is no to in track file */</span></div>
<div class="line"><span class="lineno">  369</span>        <span class="keywordflow">if</span> (feof(track))</div>
<div class="line"><span class="lineno">  370</span>        {</div>
<div class="line"><span class="lineno">  371</span>            fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError add_edge_in: Couldn&#39;t find lat %f lon %f in track file &quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, to-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, to-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon);</div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  373</span>        }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>        <span class="comment">/* Add distance and elevation from last point to currently read point to dist and up or down */</span></div>
<div class="line"><span class="lineno">  376</span>        dist += <a class="code hl_function" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance</a>(latprev, lonprev, lat, lon);</div>
<div class="line"><span class="lineno">  377</span>        <span class="comment">/* Read and add elevation */</span></div>
<div class="line"><span class="lineno">  378</span>        sscanf(strstr(buffer, <span class="stringliteral">&quot;&lt;ele&gt;&quot;</span>), <span class="stringliteral">&quot;&lt;ele&gt;%lf&quot;</span>, &amp;el);</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">if</span> (el &gt; prevel)</div>
<div class="line"><span class="lineno">  380</span>            up += el - prevel;</div>
<div class="line"><span class="lineno">  381</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  382</span>            down += prevel - el;</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>        <span class="comment">/* Set prevs to currents */</span></div>
<div class="line"><span class="lineno">  385</span>        prevel = el;</div>
<div class="line"><span class="lineno">  386</span>        lonprev = lon;</div>
<div class="line"><span class="lineno">  387</span>        latprev = lat;</div>
<div class="line"><span class="lineno">  388</span>    }</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>    <span class="comment">/* Create edge_in and set values, stitch in edges_in list */</span></div>
<div class="line"><span class="lineno">  391</span>    <a class="code hl_struct" href="structedges__list.html">edges_list</a> *edge_in = malloc(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structedges__list.html">edges_list</a>));</div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">if</span> (edge_in == NULL)</div>
<div class="line"><span class="lineno">  393</span>    {</div>
<div class="line"><span class="lineno">  394</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError add_edge_in: Couldn&#39;t allocate memory&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  395</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  396</span>    }</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>    edge_in-&gt;edge.dist = dist;</div>
<div class="line"><span class="lineno">  399</span>    edge_in-&gt;edge.up = up;</div>
<div class="line"><span class="lineno">  400</span>    edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#a594cecf88b55c6f96b0fb277bd58e1f4">down</a> = down;</div>
<div class="line"><span class="lineno">  401</span>    edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a> = from;</div>
<div class="line"><span class="lineno">  402</span>    edge_in-&gt;next = NULL;</div>
<div class="line"><span class="lineno">  403</span>    to-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> = edge_in;</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>    <span class="comment">/* Create edge in other direction */</span></div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>    <a class="code hl_struct" href="structedges__list.html">edges_list</a> *edge_in_rev = malloc(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structedges__list.html">edges_list</a>));</div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordflow">if</span> (edge_in_rev == NULL)</div>
<div class="line"><span class="lineno">  409</span>    {</div>
<div class="line"><span class="lineno">  410</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError add_edge_in: Couldn&#39;t allocate memory&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  411</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  412</span>    }</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>    edge_in_rev-&gt;edge.dist = dist;</div>
<div class="line"><span class="lineno">  415</span>    edge_in_rev-&gt;edge.<a class="code hl_variable" href="structedge.html#a594cecf88b55c6f96b0fb277bd58e1f4">down</a> = up;</div>
<div class="line"><span class="lineno">  416</span>    edge_in_rev-&gt;edge.up = down;</div>
<div class="line"><span class="lineno">  417</span>    edge_in_rev-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a> = to;</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>    <a class="code hl_struct" href="structedges__list.html">edges_list</a> *temp;</div>
<div class="line"><span class="lineno">  420</span>    temp = from-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>;</div>
<div class="line"><span class="lineno">  421</span>    from-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> = edge_in_rev;</div>
<div class="line"><span class="lineno">  422</span>    edge_in_rev-&gt;next = temp;</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>    <span class="comment">/* Success, return 1*/</span></div>
<div class="line"><span class="lineno">  425</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  426</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a02434d9cbacdb757bbce7d8d872bc5d8"><div class="ttname"><a href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance</a></div><div class="ttdeci">double calculateDistance(double lat1, double lon1, double lat2, double lon2)</div><div class="ttdoc">Calculates the distance between two coordinates.</div><div class="ttdef"><b>Definition</b> itra_calc.c:250</div></div>
<div class="ttc" id="aitra__calc_8c_html_a4f9754bb75e2b21d82c88e4833e6c2ca"><div class="ttname"><a href="itra__calc_8c.html#a4f9754bb75e2b21d82c88e4833e6c2ca">is_in_list</a></div><div class="ttdeci">point_list * is_in_list(point_list *head, point_list *to_find)</div><div class="ttdoc">Looks up if a point_list element is already in the linked list.</div><div class="ttdef"><b>Definition</b> itra_calc.c:126</div></div>
<div class="ttc" id="aitra__calc_8c_html_a59be80d1d80fc8a9dbfe8d823dbbac74"><div class="ttname"><a href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a></div><div class="ttdeci">#define ERR_COLOR</div><div class="ttdoc">Red color ANSI escape code for stderr outputs.</div><div class="ttdef"><b>Definition</b> itra_calc.c:18</div></div>
<div class="ttc" id="aitra__calc_8c_html_ad7c3b975e5552a122f836b02fa138502"><div class="ttname"><a href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a></div><div class="ttdeci">#define RESET_COLOR</div><div class="ttdoc">ANSI escape code to reset terminal color to default.</div><div class="ttdef"><b>Definition</b> itra_calc.c:23</div></div>
<div class="ttc" id="astructedge_html_a594cecf88b55c6f96b0fb277bd58e1f4"><div class="ttname"><a href="structedge.html#a594cecf88b55c6f96b0fb277bd58e1f4">edge::down</a></div><div class="ttdeci">double down</div><div class="ttdef"><b>Definition</b> itra_calc.c:64</div></div>
<div class="ttc" id="astructedge_html_ad3eb8a349ea9f7377a5424b25010d7b1"><div class="ttname"><a href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">edge::from</a></div><div class="ttdeci">point_list * from</div><div class="ttdef"><b>Definition</b> itra_calc.c:63</div></div>
<div class="ttc" id="astructedges__list_html"><div class="ttname"><a href="structedges__list.html">edges_list</a></div><div class="ttdoc">Edges in a linked list coming into a certain node (Used by Dijkstra)</div><div class="ttdef"><b>Definition</b> itra_calc.c:71</div></div>
<div class="ttc" id="astructpoint_html_a008608f32b9f83b47ded9b43d6bff4af"><div class="ttname"><a href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">point::edges_in</a></div><div class="ttdeci">struct _edges_list * edges_in</div><div class="ttdef"><b>Definition</b> itra_calc.c:45</div></div>
<div class="ttc" id="astructpoint_html_a0411d69bda51bd8c227133e24084e1ab"><div class="ttname"><a href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">point::location</a></div><div class="ttdeci">coordinates location</div><div class="ttdef"><b>Definition</b> itra_calc.c:41</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance()</a>, <a class="el" href="structedge.html#a594cecf88b55c6f96b0fb277bd58e1f4">edge::down</a>, <a class="el" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">point::edges_in</a>, <a class="el" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a>, <a class="el" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">edge::from</a>, <a class="el" href="itra__calc_8c.html#a4f9754bb75e2b21d82c88e4833e6c2ca">is_in_list()</a>, <a class="el" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">point::location</a>, and <a class="el" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>.</p>

</div>
</div>
<a id="a627338ccb86565ad1fc4a7ad6d0c520e" name="a627338ccb86565ad1fc4a7ad6d0c520e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627338ccb86565ad1fc4a7ad6d0c520e">&#9670;&#160;</a></span>calculate_itra()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double calculate_itra </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>origin_itra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structedge.html">edge</a>&#160;</td>
          <td class="paramname"><em>edge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate ITRA-score for a path consisting of a path to a previous point and an edge from the previous point to the current point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">origin_itra</td><td>ITRA-score of the path from the starting point to the previous point. </td></tr>
    <tr><td class="paramname">edge</td><td>edge from previous point to current point containing distance, up and down level information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ITRA-score of the path from start to the current point. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  679</span>{</div>
<div class="line"><span class="lineno">  680</span>    <span class="keywordflow">return</span> origin_itra + (<a class="code hl_struct" href="structedge.html">edge</a>.dist + (<a class="code hl_struct" href="structedge.html">edge</a>.up - <a class="code hl_struct" href="structedge.html">edge</a>.<a class="code hl_variable" href="structedge.html#a594cecf88b55c6f96b0fb277bd58e1f4">down</a>) / 100.0);</div>
<div class="line"><span class="lineno">  681</span>}</div>
<div class="ttc" id="astructedge_html"><div class="ttname"><a href="structedge.html">edge</a></div><div class="ttdoc">Edge definition.</div><div class="ttdef"><b>Definition</b> itra_calc.c:62</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structedge.html#a594cecf88b55c6f96b0fb277bd58e1f4">edge::down</a>.</p>

</div>
</div>
<a id="a02434d9cbacdb757bbce7d8d872bc5d8" name="a02434d9cbacdb757bbce7d8d872bc5d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02434d9cbacdb757bbce7d8d872bc5d8">&#9670;&#160;</a></span>calculateDistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double calculateDistance </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the distance between two coordinates. </p>
<dl class="section return"><dt>Returns</dt><dd>Distance in km. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  251</span>{</div>
<div class="line"><span class="lineno">  252</span>    <span class="comment">/* Convert latitude and longitude from degrees to radians */</span></div>
<div class="line"><span class="lineno">  253</span>    lat1 = <a class="code hl_function" href="itra__calc_8c.html#a386f4a2407dc7273907be947bd947e08">toRadians</a>(lat1);</div>
<div class="line"><span class="lineno">  254</span>    lon1 = <a class="code hl_function" href="itra__calc_8c.html#a386f4a2407dc7273907be947bd947e08">toRadians</a>(lon1);</div>
<div class="line"><span class="lineno">  255</span>    lat2 = <a class="code hl_function" href="itra__calc_8c.html#a386f4a2407dc7273907be947bd947e08">toRadians</a>(lat2);</div>
<div class="line"><span class="lineno">  256</span>    lon2 = <a class="code hl_function" href="itra__calc_8c.html#a386f4a2407dc7273907be947bd947e08">toRadians</a>(lon2);</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>    <span class="comment">/* Calculate differences in coordinates */</span></div>
<div class="line"><span class="lineno">  259</span>    <span class="keywordtype">double</span> dlat = lat2 - lat1;</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordtype">double</span> dlon = lon2 - lon1;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>    <span class="comment">/* Calculate distance */</span></div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordtype">double</span> a = sin(dlat / 2) * sin(dlat / 2) + cos(lat1) * cos(lat2) * sin(dlon / 2) * sin(dlon / 2);</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordtype">double</span> c = 2 * atan2(sqrt(a), sqrt(1 - a));</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordtype">double</span> distance = RADIUS_OF_EARTH * c;</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordflow">return</span> distance;</div>
<div class="line"><span class="lineno">  269</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a386f4a2407dc7273907be947bd947e08"><div class="ttname"><a href="itra__calc_8c.html#a386f4a2407dc7273907be947bd947e08">toRadians</a></div><div class="ttdeci">double toRadians(double degree)</div><div class="ttdoc">Convert degrees to radians.</div><div class="ttdef"><b>Definition</b> itra_calc.c:241</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a386f4a2407dc7273907be947bd947e08">toRadians()</a>.</p>

</div>
</div>
<a id="ae9724035b23c8622a2a189d6161591bf" name="ae9724035b23c8622a2a189d6161591bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9724035b23c8622a2a189d6161591bf">&#9670;&#160;</a></span>count_points()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t count_points </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Counts number of points in linked list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Pointer to the sentinel of the linked list of points. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of points. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  658</span>{</div>
<div class="line"><span class="lineno">  659</span>    <span class="keywordtype">size_t</span> count = 0;</div>
<div class="line"><span class="lineno">  660</span>    head = head-&gt;next;</div>
<div class="line"><span class="lineno">  661</span> </div>
<div class="line"><span class="lineno">  662</span>    <span class="keywordflow">while</span> (head != NULL)</div>
<div class="line"><span class="lineno">  663</span>    {</div>
<div class="line"><span class="lineno">  664</span>        head = head-&gt;next;</div>
<div class="line"><span class="lineno">  665</span>        count++;</div>
<div class="line"><span class="lineno">  666</span>    }</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>    <span class="keywordflow">return</span> count;</div>
<div class="line"><span class="lineno">  669</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aece42006e59e830731fa49885f6f1202" name="aece42006e59e830731fa49885f6f1202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece42006e59e830731fa49885f6f1202">&#9670;&#160;</a></span>destroy_edges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_edges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structedges__list.html">edges_list</a> **&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees up linked list of edges. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Double pointer to head of the linked list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void (sets *head to NULL) </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   82</span>{</div>
<div class="line"><span class="lineno">   83</span>    <a class="code hl_struct" href="structedges__list.html">edges_list</a> *curelem = *head, *next;</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">while</span> (curelem != NULL)</div>
<div class="line"><span class="lineno">   86</span>    {</div>
<div class="line"><span class="lineno">   87</span>        next = curelem-&gt;next;</div>
<div class="line"><span class="lineno">   88</span>        free(curelem);</div>
<div class="line"><span class="lineno">   89</span>        curelem = next;</div>
<div class="line"><span class="lineno">   90</span>    }</div>
<div class="line"><span class="lineno">   91</span>    *head = NULL;</div>
<div class="line"><span class="lineno">   92</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a777592a0ad74f6572c8f106ebad69025" name="a777592a0ad74f6572c8f106ebad69025"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a777592a0ad74f6572c8f106ebad69025">&#9670;&#160;</a></span>destroy_points()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_points </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> **&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees up linked list of points (with sentinel). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Double pointer to sentinel of the linked list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void (sets *head to NULL) </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  100</span>{</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">if</span> ((*head)-&gt;next == NULL)</div>
<div class="line"><span class="lineno">  102</span>    {</div>
<div class="line"><span class="lineno">  103</span>        free(*head);</div>
<div class="line"><span class="lineno">  104</span>        *head = NULL;</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  106</span>    }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *curelem = *head, *next;</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">while</span> (curelem != NULL)</div>
<div class="line"><span class="lineno">  111</span>    {</div>
<div class="line"><span class="lineno">  112</span>        <a class="code hl_function" href="itra__calc_8c.html#aece42006e59e830731fa49885f6f1202">destroy_edges</a>(&amp;(curelem-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>));</div>
<div class="line"><span class="lineno">  113</span>        next = curelem-&gt;next;</div>
<div class="line"><span class="lineno">  114</span>        free(curelem);</div>
<div class="line"><span class="lineno">  115</span>        curelem = next;</div>
<div class="line"><span class="lineno">  116</span>    }</div>
<div class="line"><span class="lineno">  117</span>    *head = NULL;</div>
<div class="line"><span class="lineno">  118</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_aece42006e59e830731fa49885f6f1202"><div class="ttname"><a href="itra__calc_8c.html#aece42006e59e830731fa49885f6f1202">destroy_edges</a></div><div class="ttdeci">void destroy_edges(edges_list **head)</div><div class="ttdoc">Frees up linked list of edges.</div><div class="ttdef"><b>Definition</b> itra_calc.c:81</div></div>
<div class="ttc" id="astructpoint__list_html"><div class="ttname"><a href="structpoint__list.html">point_list</a></div><div class="ttdoc">List for points (nodes)</div><div class="ttdef"><b>Definition</b> itra_calc.c:53</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#aece42006e59e830731fa49885f6f1202">destroy_edges()</a>, and <a class="el" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">point::edges_in</a>.</p>

</div>
</div>
<a id="a0dd17c2fe52c646a82e3b2814a61c93e" name="a0dd17c2fe52c646a82e3b2814a61c93e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dd17c2fe52c646a82e3b2814a61c93e">&#9670;&#160;</a></span>find_shortest_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_shortest_path </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>points_head</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function responsible for Dijkstra and finding shortest path. </p>
<p>Finds shortest path for all points in an already existing graph (map) for a given starting point.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">root</td><td>Pointer to a point which is considered the root. All distances will be calculated from this point. </td></tr>
    <tr><td class="paramname">points_head</td><td>Pointer to the sentinel of the linked list of points. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  761</span>{</div>
<div class="line"><span class="lineno">  762</span>    <span class="comment">/* Set up root for Dijkstra */</span></div>
<div class="line"><span class="lineno">  763</span>    root-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> = 0;</div>
<div class="line"><span class="lineno">  764</span>    root-&gt;point.<a class="code hl_variable" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> = 1;</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>    <span class="comment">/* Set up break condition values */</span></div>
<div class="line"><span class="lineno">  767</span>    <span class="keywordtype">size_t</span> number_visited = 1;</div>
<div class="line"><span class="lineno">  768</span>    <span class="keywordtype">size_t</span> number_points = <a class="code hl_function" href="itra__calc_8c.html#ae9724035b23c8622a2a189d6161591bf">count_points</a>(points_head);</div>
<div class="line"><span class="lineno">  769</span> </div>
<div class="line"><span class="lineno">  770</span>    <span class="comment">/* Run Dijkstra up until all points are visited */</span></div>
<div class="line"><span class="lineno">  771</span>    <span class="keywordflow">while</span> (number_visited &lt;= number_points)</div>
<div class="line"><span class="lineno">  772</span>    {</div>
<div class="line"><span class="lineno">  773</span>        <a class="code hl_struct" href="structpoint__list.html">point_list</a> *curelem = points_head-&gt;next;</div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>        <span class="comment">/* In each iteration try to improve distance for all points */</span></div>
<div class="line"><span class="lineno">  776</span>        <span class="keywordflow">while</span> (curelem != NULL)</div>
<div class="line"><span class="lineno">  777</span>        {</div>
<div class="line"><span class="lineno">  778</span>            <span class="keywordflow">if</span> (curelem-&gt;point.<a class="code hl_variable" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> == 0)</div>
<div class="line"><span class="lineno">  779</span>            {</div>
<div class="line"><span class="lineno">  780</span>                <a class="code hl_function" href="itra__calc_8c.html#a7858bc74bf482c2bbec69a07f2078439">improve_dist</a>(curelem);</div>
<div class="line"><span class="lineno">  781</span>            }</div>
<div class="line"><span class="lineno">  782</span>            curelem = curelem-&gt;next;</div>
<div class="line"><span class="lineno">  783</span>        }</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>        <span class="comment">/* Set point with the smallest distance visited */</span></div>
<div class="line"><span class="lineno">  786</span>        <a class="code hl_function" href="itra__calc_8c.html#af41632d84b5bd81f642bd5680f224bb0">set_smallest_visited</a>(points_head);</div>
<div class="line"><span class="lineno">  787</span>        number_visited++;</div>
<div class="line"><span class="lineno">  788</span>    }</div>
<div class="line"><span class="lineno">  789</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a7858bc74bf482c2bbec69a07f2078439"><div class="ttname"><a href="itra__calc_8c.html#a7858bc74bf482c2bbec69a07f2078439">improve_dist</a></div><div class="ttdeci">void improve_dist(point_list *point)</div><div class="ttdoc">Tries to improve on the shortest distance of given point along all of its edges.</div><div class="ttdef"><b>Definition</b> itra_calc.c:692</div></div>
<div class="ttc" id="aitra__calc_8c_html_ae9724035b23c8622a2a189d6161591bf"><div class="ttname"><a href="itra__calc_8c.html#ae9724035b23c8622a2a189d6161591bf">count_points</a></div><div class="ttdeci">size_t count_points(point_list *head)</div><div class="ttdoc">Counts number of points in linked list.</div><div class="ttdef"><b>Definition</b> itra_calc.c:657</div></div>
<div class="ttc" id="aitra__calc_8c_html_af41632d84b5bd81f642bd5680f224bb0"><div class="ttname"><a href="itra__calc_8c.html#af41632d84b5bd81f642bd5680f224bb0">set_smallest_visited</a></div><div class="ttdeci">void set_smallest_visited(point_list *head)</div><div class="ttdoc">Sets point_list-&gt;point.visited 1 for the point with the smallest distance from start which is not vis...</div><div class="ttdef"><b>Definition</b> itra_calc.c:724</div></div>
<div class="ttc" id="astructpoint_html_a4b66973fd0abdd396e7c9af5f52a9600"><div class="ttname"><a href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">point::visited</a></div><div class="ttdeci">int visited</div><div class="ttdef"><b>Definition</b> itra_calc.c:44</div></div>
<div class="ttc" id="astructpoint_html_accf93555161c9eedf006462a228af523"><div class="ttname"><a href="structpoint.html#accf93555161c9eedf006462a228af523">point::dist</a></div><div class="ttdeci">double dist</div><div class="ttdef"><b>Definition</b> itra_calc.c:46</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#ae9724035b23c8622a2a189d6161591bf">count_points()</a>, <a class="el" href="structpoint.html#accf93555161c9eedf006462a228af523">point::dist</a>, <a class="el" href="itra__calc_8c.html#a7858bc74bf482c2bbec69a07f2078439">improve_dist()</a>, <a class="el" href="itra__calc_8c.html#af41632d84b5bd81f642bd5680f224bb0">set_smallest_visited()</a>, and <a class="el" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">point::visited</a>.</p>

</div>
</div>
<a id="a560f5c80548ae92bc99fc84f2401f4dc" name="a560f5c80548ae92bc99fc84f2401f4dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a560f5c80548ae92bc99fc84f2401f4dc">&#9670;&#160;</a></span>get_elevation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_elevation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>to_get</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>track</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look up elevation for <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a> to_get in FILE track. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to_get</td><td>Pointer to the point. </td></tr>
    <tr><td class="paramname">track</td><td>Track .gpx extension xml file. Has coordinates and elevation data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>track.gpx must have elevation data and must contain the correct gps location information. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Status indication: 0 if elevation was acquired succesfully, 1 otherwise. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  279</span>{</div>
<div class="line"><span class="lineno">  280</span>    <span class="comment">/* Rewind to the start of track and set up lat lon el */</span></div>
<div class="line"><span class="lineno">  281</span>    rewind(track);</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordtype">double</span> lat, lon, el;</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">while</span> (!feof(track))</div>
<div class="line"><span class="lineno">  285</span>    {</div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordtype">char</span> buffer[BUFFER_SIZE];</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>        <span class="comment">/* Read line-by line until lat and lon corresponding to to_get are found */</span></div>
<div class="line"><span class="lineno">  289</span>        fgets(buffer, BUFFER_SIZE, track);</div>
<div class="line"><span class="lineno">  290</span>        <span class="keywordflow">if</span> (strstr(buffer, <span class="stringliteral">&quot;lat&quot;</span>) != NULL)</div>
<div class="line"><span class="lineno">  291</span>        {</div>
<div class="line"><span class="lineno">  292</span>            sscanf(strstr(buffer, <span class="stringliteral">&quot;lat&quot;</span>), <span class="stringliteral">&quot;lat=\&quot;%lf\&quot; lon=\&quot;%lf\&quot;&quot;</span>, &amp;lat, &amp;lon);</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>            <span class="comment">/* If correct point is found, read next line which contains elevation data */</span></div>
<div class="line"><span class="lineno">  295</span>            <span class="keywordflow">if</span> (lat == to_get-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat &amp;&amp; lon == to_get-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon)</div>
<div class="line"><span class="lineno">  296</span>            {</div>
<div class="line"><span class="lineno">  297</span>                fgets(buffer, BUFFER_SIZE, track);</div>
<div class="line"><span class="lineno">  298</span>                sscanf(strstr(buffer, <span class="stringliteral">&quot;&lt;ele&gt;&quot;</span>), <span class="stringliteral">&quot;&lt;ele&gt;%lf&quot;</span>, &amp;el);</div>
<div class="line"><span class="lineno">  299</span>                to_get-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.el = el;</div>
<div class="line"><span class="lineno">  300</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  301</span>            }</div>
<div class="line"><span class="lineno">  302</span>        }</div>
<div class="line"><span class="lineno">  303</span>    }</div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  305</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">point::location</a>.</p>

</div>
</div>
<a id="a2a4019289b0eb1ed9a96cec4b38bad0b" name="a2a4019289b0eb1ed9a96cec4b38bad0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a4019289b0eb1ed9a96cec4b38bad0b">&#9670;&#160;</a></span>get_last_edge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structedges__list.html">edges_list</a> * get_last_edge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structedges__list.html">edges_list</a> *&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks up last element in an <a class="el" href="structedges__list.html" title="Edges in a linked list coming into a certain node (Used by Dijkstra)">edges_list</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Pointer to head of the linked list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the last element. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  178</span>{</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">while</span> (head != NULL &amp;&amp; head-&gt;next != NULL)</div>
<div class="line"><span class="lineno">  180</span>        head = head-&gt;next;</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">return</span> head;</div>
<div class="line"><span class="lineno">  183</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7858bc74bf482c2bbec69a07f2078439" name="a7858bc74bf482c2bbec69a07f2078439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7858bc74bf482c2bbec69a07f2078439">&#9670;&#160;</a></span>improve_dist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void improve_dist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to improve on the shortest distance of given point along all of its edges. </p>
<p>Looks through each edge in edges_in and tries, if the distance coming along that edge would be smaller than the current distance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>The point in question. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  693</span>{</div>
<div class="line"><span class="lineno">  694</span>    <a class="code hl_struct" href="structedges__list.html">edges_list</a> *edge_in = <a class="code hl_struct" href="structpoint.html">point</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>;</div>
<div class="line"><span class="lineno">  695</span> </div>
<div class="line"><span class="lineno">  696</span>    <span class="comment">/* Try to improve dist with each edge in */</span></div>
<div class="line"><span class="lineno">  697</span>    <span class="keywordflow">while</span> (edge_in != NULL)</div>
<div class="line"><span class="lineno">  698</span>    {</div>
<div class="line"><span class="lineno">  699</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  700</span><span class="comment">        If the distance of the point reached from the currently checked edge in is less than the current distance</span></div>
<div class="line"><span class="lineno">  701</span><span class="comment">        (edge_in-&gt;edge.from-&gt;point.dist + edge_in-&gt;edge.dist &lt; point-&gt;point.dist)</span></div>
<div class="line"><span class="lineno">  702</span><span class="comment">            OR</span></div>
<div class="line"><span class="lineno">  703</span><span class="comment">            the points distance is infinity (point-&gt;point.dist &lt; 0)</span></div>
<div class="line"><span class="lineno">  704</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  705</span><span class="comment">        AND</span></div>
<div class="line"><span class="lineno">  706</span><span class="comment">        the distance of the point which the edge originates from is nor infinity (edge_in-&gt;edge.from-&gt;point.dist &gt;= 0)</span></div>
<div class="line"><span class="lineno">  707</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  708</span>        <span class="keywordflow">if</span> ((<a class="code hl_struct" href="structpoint.html">point</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> &lt; 0 || edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> + edge_in-&gt;edge.dist &lt; <a class="code hl_struct" href="structpoint.html">point</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a>) &amp;&amp; edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  709</span>        {</div>
<div class="line"><span class="lineno">  710</span>            <span class="comment">/* Set distance and itra to the itra and distance of the route from origin point along the edge to the current point */</span></div>
<div class="line"><span class="lineno">  711</span>            <a class="code hl_struct" href="structpoint.html">point</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> = edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> + edge_in-&gt;edge.dist;</div>
<div class="line"><span class="lineno">  712</span>            <a class="code hl_struct" href="structpoint.html">point</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#a8bc8844c4a53e08c58518895a243624d">itra</a> = <a class="code hl_function" href="itra__calc_8c.html#a627338ccb86565ad1fc4a7ad6d0c520e">calculate_itra</a>(edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a>-&gt;point.<a class="code hl_variable" href="structpoint.html#a8bc8844c4a53e08c58518895a243624d">itra</a>, edge_in-&gt;edge);</div>
<div class="line"><span class="lineno">  713</span>        }</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>        edge_in = edge_in-&gt;next;</div>
<div class="line"><span class="lineno">  716</span>    }</div>
<div class="line"><span class="lineno">  717</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a627338ccb86565ad1fc4a7ad6d0c520e"><div class="ttname"><a href="itra__calc_8c.html#a627338ccb86565ad1fc4a7ad6d0c520e">calculate_itra</a></div><div class="ttdeci">double calculate_itra(double origin_itra, edge edge)</div><div class="ttdoc">Calculate ITRA-score for a path consisting of a path to a previous point and an edge from the previou...</div><div class="ttdef"><b>Definition</b> itra_calc.c:678</div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdoc">Point definition.</div><div class="ttdef"><b>Definition</b> itra_calc.c:39</div></div>
<div class="ttc" id="astructpoint_html_a8bc8844c4a53e08c58518895a243624d"><div class="ttname"><a href="structpoint.html#a8bc8844c4a53e08c58518895a243624d">point::itra</a></div><div class="ttdeci">double itra</div><div class="ttdef"><b>Definition</b> itra_calc.c:42</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a627338ccb86565ad1fc4a7ad6d0c520e">calculate_itra()</a>, <a class="el" href="structpoint.html#accf93555161c9eedf006462a228af523">point::dist</a>, <a class="el" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">point::edges_in</a>, <a class="el" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">edge::from</a>, and <a class="el" href="structpoint.html#a8bc8844c4a53e08c58518895a243624d">point::itra</a>.</p>

</div>
</div>
<a id="a4f9754bb75e2b21d82c88e4833e6c2ca" name="a4f9754bb75e2b21d82c88e4833e6c2ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f9754bb75e2b21d82c88e4833e6c2ca">&#9670;&#160;</a></span>is_in_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint__list.html">point_list</a> * is_in_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>to_find</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks up if a <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a> element is already in the linked list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Pointer to sentinel of the linked list. </td></tr>
    <tr><td class="paramname">to_find</td><td>Pointer to a <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a> element. This is the element to find in the list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the element with the same coordinates in the list. NULL if no match was found. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  127</span>{</div>
<div class="line"><span class="lineno">  128</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *curelem = head;</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">while</span> (curelem != NULL)</div>
<div class="line"><span class="lineno">  131</span>    {</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">if</span> (curelem-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat == to_find-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat &amp;&amp; curelem-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon == to_find-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon &amp;&amp; curelem != to_find)</div>
<div class="line"><span class="lineno">  133</span>        {</div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">return</span> curelem;</div>
<div class="line"><span class="lineno">  135</span>        }</div>
<div class="line"><span class="lineno">  136</span>        curelem = curelem-&gt;next;</div>
<div class="line"><span class="lineno">  137</span>    }</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  140</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">point::location</a>.</p>

</div>
</div>
<a id="abf9e6b7e6f15df4b525a2e7705ba3089" name="abf9e6b7e6f15df4b525a2e7705ba3089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf9e6b7e6f15df4b525a2e7705ba3089">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function. Responsible for: runtime parameters error handling, displaying user info, getting user input for map files and planning parameters, calling read_points and print_route, displaying help information. </p>
<p>First main checks running parameters, then calls read_points. If map was built succesfully it displays status message and asks for input on start and destination. If input was successful it calls print_route. If &ndash;h flag is provided or error occurs, it displays help message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Standard C run argument count. </td></tr>
    <tr><td class="paramname">argv</td><td>Standard C pointer to run argument strings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Run arguments should always be according to specifications. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Status indication: 0 if no runtime errors were encountered, 1 otherwise (if help was displayed). </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  873</span>{</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>    <span class="comment">/* No input files */</span></div>
<div class="line"><span class="lineno">  876</span>    <span class="keywordflow">if</span> (argc &lt; 2)</div>
<div class="line"><span class="lineno">  877</span>    {</div>
<div class="line"><span class="lineno">  878</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError main: No input files specified!&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  879</span>        <span class="keywordflow">goto</span> help;</div>
<div class="line"><span class="lineno">  880</span>    }</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>    <span class="comment">/* --h flag */</span></div>
<div class="line"><span class="lineno">  883</span>    <span class="keywordflow">if</span> (!strcmp(argv[1], <span class="stringliteral">&quot;--h&quot;</span>))</div>
<div class="line"><span class="lineno">  884</span>        <span class="keywordflow">goto</span> help;</div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span>    <span class="comment">/* argc - 1 is odd: 2 files per trail! */</span></div>
<div class="line"><span class="lineno">  887</span>    <span class="keywordflow">if</span> ((argc - 1) % 2 != 0)</div>
<div class="line"><span class="lineno">  888</span>    {</div>
<div class="line"><span class="lineno">  889</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError main: Number of specified files is odd! (One (or more) files are missing)&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  890</span>        <span class="keywordflow">goto</span> help;</div>
<div class="line"><span class="lineno">  891</span>    }</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span>    <span class="comment">/* Build map */</span></div>
<div class="line"><span class="lineno">  894</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *map = <a class="code hl_function" href="itra__calc_8c.html#af13812af799221713099f955dd7025f4">read_points</a>(&amp;(argv[1]), (argc - 1) / 2);</div>
<div class="line"><span class="lineno">  895</span>    <span class="keywordflow">if</span> (map == NULL)</div>
<div class="line"><span class="lineno">  896</span>        <span class="keywordflow">goto</span> help;</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>    <span class="comment">/* Create user specified start end dest points */</span></div>
<div class="line"><span class="lineno">  899</span>    <a class="code hl_struct" href="structpoint.html">point</a> start, dest;</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>    printf(<a class="code hl_define" href="itra__calc_8c.html#ac4bdeb73d33895bb745d17b3d8539a6a">GREEN_COLOR</a> <span class="stringliteral">&quot;\nMap created succesfully!\n\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a></div>
<div class="line"><span class="lineno">  902</span>               <a class="code hl_define" href="itra__calc_8c.html#aadb3e24b0191a3b06d8dfc41506a81dd">INPUT_COLOR</a> <span class="stringliteral">&quot;Please provide start end end point to your route! &quot;</span></div>
<div class="line"><span class="lineno">  903</span>                       <span class="stringliteral">&quot;(Lat. and Lon. separated by any whitespace character(s)):\n\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>    printf(<a class="code hl_define" href="itra__calc_8c.html#aadb3e24b0191a3b06d8dfc41506a81dd">INPUT_COLOR</a> <span class="stringliteral">&quot;Start coordinates:\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  906</span>    <span class="keywordflow">if</span> (scanf(<span class="stringliteral">&quot;%lf %lf&quot;</span>, &amp;start.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, &amp;start.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon) != 2)</div>
<div class="line"><span class="lineno">  907</span>    {</div>
<div class="line"><span class="lineno">  908</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError main: Couldn&#39;t read start coordinates&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  909</span>        <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;map);</div>
<div class="line"><span class="lineno">  910</span>        <span class="keywordflow">goto</span> help;</div>
<div class="line"><span class="lineno">  911</span>    }</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>    printf(<a class="code hl_define" href="itra__calc_8c.html#aadb3e24b0191a3b06d8dfc41506a81dd">INPUT_COLOR</a> <span class="stringliteral">&quot;\n\nDestination coordinates:\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  914</span>    <span class="keywordflow">if</span> (scanf(<span class="stringliteral">&quot;%lf %lf&quot;</span>, &amp;dest.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, &amp;dest.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon) != 2)</div>
<div class="line"><span class="lineno">  915</span>    {</div>
<div class="line"><span class="lineno">  916</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError main: Couldn&#39;t read dest coordinates&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  917</span>        <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;map);</div>
<div class="line"><span class="lineno">  918</span>        <span class="keywordflow">goto</span> help;</div>
<div class="line"><span class="lineno">  919</span>    }</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>    <span class="comment">/* Plan route and print it */</span></div>
<div class="line"><span class="lineno">  922</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="itra__calc_8c.html#ae082408aa13c29b167bf25ad0f22dc40">print_route</a>(start, dest, map))</div>
<div class="line"><span class="lineno">  923</span>    {</div>
<div class="line"><span class="lineno">  924</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError main: print_route has terminated with exit code 1&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  925</span>        <span class="keywordflow">goto</span> help;</div>
<div class="line"><span class="lineno">  926</span>    }</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  929</span> </div>
<div class="line"><span class="lineno">  930</span><span class="comment">/* Help message */</span></div>
<div class="line"><span class="lineno">  931</span>help:</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>    printf(<a class="code hl_define" href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a> <span class="stringliteral">&quot;\n\n---------------------------------------------------------------------------------------------------&quot;</span></div>
<div class="line"><span class="lineno">  934</span>                      <span class="stringliteral">&quot;\nUsage help:\n\n&quot;</span></div>
<div class="line"><span class="lineno">  935</span>                      <span class="stringliteral">&quot;\tDisplay help message: &lt;program_name&gt; --h\n\n&quot;</span></div>
<div class="line"><span class="lineno">  936</span>                      <span class="stringliteral">&quot;\tCreate map from track and route .gpx files:\n&quot;</span></div>
<div class="line"><span class="lineno">  937</span>                      <span class="stringliteral">&quot;\t\t&lt;program_name&gt; &lt;route1&gt;.gpx &lt;ele-track1&gt;.gpx &lt;route2&gt;.gpx &lt;ele-track2&gt;.gpx ...\n&quot;</span></div>
<div class="line"><span class="lineno">  938</span>                      <span class="stringliteral">&quot;\t\tPlease make sure each route file has a corresponding ele-track file!\n\n&quot;</span></div>
<div class="line"><span class="lineno">  939</span>                      <span class="stringliteral">&quot;\tIf creation of map was succesfull the program will ask for input of start and end points\n&quot;</span></div>
<div class="line"><span class="lineno">  940</span>                      <span class="stringliteral">&quot;\t\tExpected coordinate input format: Decimal coordinates (with decimal point).\n&quot;</span></div>
<div class="line"><span class="lineno">  941</span>                      <span class="stringliteral">&quot;\t\tLatitude and longitude should be separated with any whitespace character\n&quot;</span></div>
<div class="line"><span class="lineno">  942</span>                      <span class="stringliteral">&quot;\t\t\tExample: 48.0976397 20.7301719\n\n\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  943</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  944</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a777592a0ad74f6572c8f106ebad69025"><div class="ttname"><a href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a></div><div class="ttdeci">void destroy_points(point_list **head)</div><div class="ttdoc">Frees up linked list of points (with sentinel).</div><div class="ttdef"><b>Definition</b> itra_calc.c:99</div></div>
<div class="ttc" id="aitra__calc_8c_html_aadb3e24b0191a3b06d8dfc41506a81dd"><div class="ttname"><a href="itra__calc_8c.html#aadb3e24b0191a3b06d8dfc41506a81dd">INPUT_COLOR</a></div><div class="ttdeci">#define INPUT_COLOR</div><div class="ttdoc">Cyan color ANSI escape code for asking for user input.</div><div class="ttdef"><b>Definition</b> itra_calc.c:21</div></div>
<div class="ttc" id="aitra__calc_8c_html_ac4bdeb73d33895bb745d17b3d8539a6a"><div class="ttname"><a href="itra__calc_8c.html#ac4bdeb73d33895bb745d17b3d8539a6a">GREEN_COLOR</a></div><div class="ttdeci">#define GREEN_COLOR</div><div class="ttdoc">Green color ANSI escape code for signaling correct operation.</div><div class="ttdef"><b>Definition</b> itra_calc.c:20</div></div>
<div class="ttc" id="aitra__calc_8c_html_ade48c7e2e47b62c4ba5b651a8fce44d7"><div class="ttname"><a href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a></div><div class="ttdeci">#define WARN_COLOR</div><div class="ttdoc">Yellow color ANSI escape code for user warnings.</div><div class="ttdef"><b>Definition</b> itra_calc.c:19</div></div>
<div class="ttc" id="aitra__calc_8c_html_ae082408aa13c29b167bf25ad0f22dc40"><div class="ttname"><a href="itra__calc_8c.html#ae082408aa13c29b167bf25ad0f22dc40">print_route</a></div><div class="ttdeci">int print_route(point start_user, point dest_user, point_list *map_head)</div><div class="ttdoc">Main function responsible for planning and printing route.</div><div class="ttdef"><b>Definition</b> itra_calc.c:802</div></div>
<div class="ttc" id="aitra__calc_8c_html_af13812af799221713099f955dd7025f4"><div class="ttname"><a href="itra__calc_8c.html#af13812af799221713099f955dd7025f4">read_points</a></div><div class="ttdeci">point_list * read_points(const char **files, size_t number_routes)</div><div class="ttdoc">Main function responsible for creating map.</div><div class="ttdef"><b>Definition</b> itra_calc.c:529</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points()</a>, <a class="el" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a>, <a class="el" href="itra__calc_8c.html#ac4bdeb73d33895bb745d17b3d8539a6a">GREEN_COLOR</a>, <a class="el" href="itra__calc_8c.html#aadb3e24b0191a3b06d8dfc41506a81dd">INPUT_COLOR</a>, <a class="el" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">point::location</a>, <a class="el" href="itra__calc_8c.html#ae082408aa13c29b167bf25ad0f22dc40">print_route()</a>, <a class="el" href="itra__calc_8c.html#af13812af799221713099f955dd7025f4">read_points()</a>, <a class="el" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, and <a class="el" href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a>.</p>

</div>
</div>
<a id="a8e6ecd81efb77ff5f16afb571c452bed" name="a8e6ecd81efb77ff5f16afb571c452bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e6ecd81efb77ff5f16afb571c452bed">&#9670;&#160;</a></span>nearest_point()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint__list.html">point_list</a> * nearest_point </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint.html">point</a>&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks up nearest point in the graph (on the map) to the provided point. </p>
<p>Gets distance to all points in list and returns a pointer to the nearest one. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8" title="Calculates the distance between two coordinates.">calculateDistance(double lat1, double lon1, double lat2, double lon2)</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>Point struct containing coordinates. </td></tr>
    <tr><td class="paramname">head</td><td>Pointer to the sentinel of the linked list of points.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to nearest point in list (NULL if error occured). </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Notifies user if selected point is more than 1 km away from the nearest point it found. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  612</span>{</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">if</span> (head == NULL || head-&gt;next == NULL)</div>
<div class="line"><span class="lineno">  614</span>    {</div>
<div class="line"><span class="lineno">  615</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError nearest_point: List is empty&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  616</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  617</span>    }</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *nearest = head-&gt;next, *curelem = head-&gt;next;</div>
<div class="line"><span class="lineno">  620</span>    <span class="keywordtype">double</span> mindist = <a class="code hl_function" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance</a>(<a class="code hl_struct" href="structpoint.html">point</a>.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, <a class="code hl_struct" href="structpoint.html">point</a>.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon, curelem-&gt;point.location.lat, curelem-&gt;point.location.lon);</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span>    <span class="comment">/* Search for nearest point */</span></div>
<div class="line"><span class="lineno">  623</span>    <span class="keywordflow">while</span> (curelem != NULL)</div>
<div class="line"><span class="lineno">  624</span>    {</div>
<div class="line"><span class="lineno">  625</span>        <span class="keywordtype">double</span> curdist = <a class="code hl_function" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance</a>(<a class="code hl_struct" href="structpoint.html">point</a>.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, <a class="code hl_struct" href="structpoint.html">point</a>.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon, curelem-&gt;point.location.lat, curelem-&gt;point.location.lon);</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">if</span> (curdist &lt; mindist)</div>
<div class="line"><span class="lineno">  628</span>        {</div>
<div class="line"><span class="lineno">  629</span>            mindist = curdist;</div>
<div class="line"><span class="lineno">  630</span>            nearest = curelem;</div>
<div class="line"><span class="lineno">  631</span>        }</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>        curelem = curelem-&gt;next;</div>
<div class="line"><span class="lineno">  634</span>    }</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span>    <span class="comment">/* Warn user if selected point is further than 1km from nearest map point */</span></div>
<div class="line"><span class="lineno">  637</span>    <span class="keywordflow">if</span> (mindist &gt; 1)</div>
<div class="line"><span class="lineno">  638</span>    {</div>
<div class="line"><span class="lineno">  639</span>        printf(<a class="code hl_define" href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a> <span class="stringliteral">&quot;\nWarning: Selected point is %.1f km from nearest trail intersection!\n&quot;</span></div>
<div class="line"><span class="lineno">  640</span>                          <span class="stringliteral">&quot;Do you want to proceed? (y/n)\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>,</div>
<div class="line"><span class="lineno">  641</span>               mindist);</div>
<div class="line"><span class="lineno">  642</span>        <span class="keywordtype">char</span> ans;</div>
<div class="line"><span class="lineno">  643</span>        fseek(stdin, 0, SEEK_END);</div>
<div class="line"><span class="lineno">  644</span>        scanf(<span class="stringliteral">&quot;%c&quot;</span>, &amp;ans);</div>
<div class="line"><span class="lineno">  645</span>        <span class="keywordflow">if</span> (ans != <span class="charliteral">&#39;y&#39;</span> &amp;&amp; ans != <span class="charliteral">&#39;Y&#39;</span>)</div>
<div class="line"><span class="lineno">  646</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  647</span>    }</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordflow">return</span> nearest;</div>
<div class="line"><span class="lineno">  650</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance()</a>, <a class="el" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a>, <a class="el" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">point::location</a>, <a class="el" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, and <a class="el" href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a>.</p>

</div>
</div>
<a id="aa0a9220ddb43b425386a06c720d6b6e9" name="aa0a9220ddb43b425386a06c720d6b6e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0a9220ddb43b425386a06c720d6b6e9">&#9670;&#160;</a></span>order_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int order_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merge two elements in the list if they represent the same location. </p>
<p>If the coordinates of the last element in <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a> occur twice in the list, the function merges the two points together by stitching the edge_in lists together and correcting the incorrect references from other edges originating from the to_merge point with the function order_merged_edges.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Pointer to sentinel of the linked list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status indication: 1 if a merge has occured, 0 if not. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  196</span>{</div>
<div class="line"><span class="lineno">  197</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *to_merge = head, *lastelem;</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="comment">/* Seek to the last two elements in the list */</span></div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">while</span> (to_merge-&gt;next != NULL)</div>
<div class="line"><span class="lineno">  201</span>    {</div>
<div class="line"><span class="lineno">  202</span>        lastelem = to_merge;</div>
<div class="line"><span class="lineno">  203</span>        to_merge = to_merge-&gt;next;</div>
<div class="line"><span class="lineno">  204</span>    }</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *merge_with = <a class="code hl_function" href="itra__calc_8c.html#a4f9754bb75e2b21d82c88e4833e6c2ca">is_in_list</a>(head, to_merge);</div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">if</span> (merge_with == NULL)</div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">/* Stitch to_merge edges_in in front of merge_with edges_in */</span></div>
<div class="line"><span class="lineno">  211</span>    <a class="code hl_struct" href="structedges__list.html">edges_list</a> *temp;</div>
<div class="line"><span class="lineno">  212</span>    temp = merge_with-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>;</div>
<div class="line"><span class="lineno">  213</span>    merge_with-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> = to_merge-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>;</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    <a class="code hl_struct" href="structedges__list.html">edges_list</a> *lastedge = <a class="code hl_function" href="itra__calc_8c.html#a2a4019289b0eb1ed9a96cec4b38bad0b">get_last_edge</a>(to_merge-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>);</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">if</span> (to_merge-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> == NULL)</div>
<div class="line"><span class="lineno">  218</span>        merge_with-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> = temp;</div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  220</span>    {</div>
<div class="line"><span class="lineno">  221</span>        merge_with-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> = to_merge-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>;</div>
<div class="line"><span class="lineno">  222</span>        lastedge-&gt;next = temp;</div>
<div class="line"><span class="lineno">  223</span>    }</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>    <span class="comment">/* Rewrite all edges where from is to_merge to merge_with */</span></div>
<div class="line"><span class="lineno">  226</span>    <a class="code hl_function" href="itra__calc_8c.html#aa896a6f73226d761c0f2c4cf3f6b36fe">order_merged_edges</a>(to_merge, merge_with, head);</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="comment">/* Pop to_merge */</span></div>
<div class="line"><span class="lineno">  229</span>    lastelem-&gt;next = NULL;</div>
<div class="line"><span class="lineno">  230</span>    free(to_merge);</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    <span class="comment">/* Return 1 (succesful merge) */</span></div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  234</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a2a4019289b0eb1ed9a96cec4b38bad0b"><div class="ttname"><a href="itra__calc_8c.html#a2a4019289b0eb1ed9a96cec4b38bad0b">get_last_edge</a></div><div class="ttdeci">edges_list * get_last_edge(edges_list *head)</div><div class="ttdoc">Looks up last element in an edges_list.</div><div class="ttdef"><b>Definition</b> itra_calc.c:177</div></div>
<div class="ttc" id="aitra__calc_8c_html_aa896a6f73226d761c0f2c4cf3f6b36fe"><div class="ttname"><a href="itra__calc_8c.html#aa896a6f73226d761c0f2c4cf3f6b36fe">order_merged_edges</a></div><div class="ttdeci">void order_merged_edges(point_list *to_merge, point_list *merge_with, point_list *head)</div><div class="ttdoc">Fixes incorrect references to a just merged point from edges.</div><div class="ttdef"><b>Definition</b> itra_calc.c:153</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">point::edges_in</a>, <a class="el" href="itra__calc_8c.html#a2a4019289b0eb1ed9a96cec4b38bad0b">get_last_edge()</a>, <a class="el" href="itra__calc_8c.html#a4f9754bb75e2b21d82c88e4833e6c2ca">is_in_list()</a>, and <a class="el" href="itra__calc_8c.html#aa896a6f73226d761c0f2c4cf3f6b36fe">order_merged_edges()</a>.</p>

</div>
</div>
<a id="aa896a6f73226d761c0f2c4cf3f6b36fe" name="aa896a6f73226d761c0f2c4cf3f6b36fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa896a6f73226d761c0f2c4cf3f6b36fe">&#9670;&#160;</a></span>order_merged_edges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint__list.html">point_list</a> void order_merged_edges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>to_merge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>merge_with</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fixes incorrect references to a just merged point from edges. </p>
<p>If a merge was done by order_list this function looks through the list and swaps the from field of all the edges, where the merged point appeaared.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to_merge</td><td>This is the pointer to the point element which was just merged by order_list. </td></tr>
    <tr><td class="paramname">merge_with</td><td>This is the pointer to the point element with which to_merge was merged. </td></tr>
    <tr><td class="paramname">head</td><td>Pointer to sentinel of the linked list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  154</span>{</div>
<div class="line"><span class="lineno">  155</span>    head = head-&gt;next;</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    <span class="keywordflow">while</span> (head != NULL)</div>
<div class="line"><span class="lineno">  158</span>    {</div>
<div class="line"><span class="lineno">  159</span>        <a class="code hl_struct" href="structedges__list.html">edges_list</a> *edge_in = head-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a>;</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">while</span> (edge_in != NULL)</div>
<div class="line"><span class="lineno">  162</span>        {</div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordflow">if</span> (edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a> == to_merge)</div>
<div class="line"><span class="lineno">  164</span>                edge_in-&gt;edge.<a class="code hl_variable" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">from</a> = merge_with;</div>
<div class="line"><span class="lineno">  165</span>            edge_in = edge_in-&gt;next;</div>
<div class="line"><span class="lineno">  166</span>        }</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>        head = head-&gt;next;</div>
<div class="line"><span class="lineno">  169</span>    }</div>
<div class="line"><span class="lineno">  170</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">point::edges_in</a>, and <a class="el" href="structedge.html#ad3eb8a349ea9f7377a5424b25010d7b1">edge::from</a>.</p>

</div>
</div>
<a id="ae082408aa13c29b167bf25ad0f22dc40" name="ae082408aa13c29b167bf25ad0f22dc40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae082408aa13c29b167bf25ad0f22dc40">&#9670;&#160;</a></span>print_route()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int print_route </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint.html">point</a>&#160;</td>
          <td class="paramname"><em>start_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint.html">point</a>&#160;</td>
          <td class="paramname"><em>dest_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>map_head</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function responsible for planning and printing route. </p>
<p>Gets nearest points on map to user specified points (nearest_point), calls Dijkstra (find_shortest_path), prints route (distance and ITRA) and frees up memory (destroy_points)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start_user</td><td>Point containing coordinates of start point specified by user. </td></tr>
    <tr><td class="paramname">dest_user</td><td>Point containing coordinates of destination point specified by user. </td></tr>
    <tr><td class="paramname">map_head</td><td>Pointer to the sentinel of the linked list of points. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status indication: 0 if planning was succesfull, 1 otherwise. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  803</span>{</div>
<div class="line"><span class="lineno">  804</span>    <span class="comment">/* Get nearest point on map to user selected points */</span></div>
<div class="line"><span class="lineno">  805</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *start = <a class="code hl_function" href="itra__calc_8c.html#a8e6ecd81efb77ff5f16afb571c452bed">nearest_point</a>(start_user, map_head);</div>
<div class="line"><span class="lineno">  806</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *dest = <a class="code hl_function" href="itra__calc_8c.html#a8e6ecd81efb77ff5f16afb571c452bed">nearest_point</a>(dest_user, map_head);</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>    <span class="comment">/* Error handling */</span></div>
<div class="line"><span class="lineno">  809</span>    <span class="keywordflow">if</span> (start == NULL || dest == NULL)</div>
<div class="line"><span class="lineno">  810</span>    {</div>
<div class="line"><span class="lineno">  811</span>        start == NULL ? fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;Error print_route: Couldnt find start lat=%f lon=%f&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>,</div>
<div class="line"><span class="lineno">  812</span>                                start_user.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, start_user.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon)</div>
<div class="line"><span class="lineno">  813</span>                      : fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;Error print_route: Couldnt find destination lat=%f lon=%f&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>,</div>
<div class="line"><span class="lineno">  814</span>                                start_user.location.lat, start_user.location.lon);</div>
<div class="line"><span class="lineno">  815</span>        <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;map_head);</div>
<div class="line"><span class="lineno">  816</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  817</span>    }</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>    <span class="comment">/* Printing info */</span></div>
<div class="line"><span class="lineno">  820</span>    printf(<a class="code hl_define" href="itra__calc_8c.html#a5d724ff30124b3ce91f377afb4598ed7">INFO_COLOR</a></div>
<div class="line"><span class="lineno">  821</span>           <span class="stringliteral">&quot;\nPlanning...\n\n&quot;</span></div>
<div class="line"><span class="lineno">  822</span>           <span class="stringliteral">&quot;From:\n&quot;</span></div>
<div class="line"><span class="lineno">  823</span>           <span class="stringliteral">&quot;\tlat=%f\n&quot;</span></div>
<div class="line"><span class="lineno">  824</span>           <span class="stringliteral">&quot;\tlon=%f\n\n&quot;</span></div>
<div class="line"><span class="lineno">  825</span>           <span class="stringliteral">&quot;To:\n&quot;</span></div>
<div class="line"><span class="lineno">  826</span>           <span class="stringliteral">&quot;\tlat=%f\n&quot;</span></div>
<div class="line"><span class="lineno">  827</span>           <span class="stringliteral">&quot;\tlon=%f\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>,</div>
<div class="line"><span class="lineno">  828</span>           start-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, start-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon, dest-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, dest-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon);</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>    <span class="comment">/* Run Dijkstra */</span></div>
<div class="line"><span class="lineno">  831</span>    <a class="code hl_function" href="itra__calc_8c.html#a0dd17c2fe52c646a82e3b2814a61c93e">find_shortest_path</a>(start, map_head);</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>    <span class="comment">/* If after Dijkstra dest dist is &lt;0 (inf is represented by -1) */</span></div>
<div class="line"><span class="lineno">  834</span>    <span class="keywordflow">if</span> (dest-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> &lt; 0)</div>
<div class="line"><span class="lineno">  835</span>    {</div>
<div class="line"><span class="lineno">  836</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a></div>
<div class="line"><span class="lineno">  837</span>                <span class="stringliteral">&quot;\nError print_route: find_shortest path couldn&#39;t find a route. Are all of the trails connected to eachother?&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>        printf(<span class="stringliteral">&quot;\n---------------------------------------------------------------------------------------------------\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a></div>
<div class="line"><span class="lineno">  840</span>               <span class="stringliteral">&quot;\nPlanning failed. Unable to find path between start and destination points.&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span>        <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;map_head);</div>
<div class="line"><span class="lineno">  843</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  844</span>    }</div>
<div class="line"><span class="lineno">  845</span> </div>
<div class="line"><span class="lineno">  846</span>    <span class="comment">/* Print results */</span></div>
<div class="line"><span class="lineno">  847</span>    printf(<a class="code hl_define" href="itra__calc_8c.html#a5d724ff30124b3ce91f377afb4598ed7">INFO_COLOR</a></div>
<div class="line"><span class="lineno">  848</span>           <span class="stringliteral">&quot;\nTotal distance: %.2f km (+ %.2f km to nearest path intersection)&quot;</span></div>
<div class="line"><span class="lineno">  849</span>           <span class="stringliteral">&quot;\nITRA-score (distance + elevation diff. / 100): %.2f\n\n\n\n&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>,</div>
<div class="line"><span class="lineno">  850</span>           dest-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a>, <a class="code hl_function" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance</a>(start_user.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, start_user.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon,</div>
<div class="line"><span class="lineno">  851</span>           start-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lat, start-&gt;point.<a class="code hl_variable" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">location</a>.lon), dest-&gt;point.<a class="code hl_variable" href="structpoint.html#a8bc8844c4a53e08c58518895a243624d">itra</a>);</div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span>    <span class="comment">/* Free memory (nono leak nono) */</span></div>
<div class="line"><span class="lineno">  854</span>    <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;(map_head));</div>
<div class="line"><span class="lineno">  855</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  856</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a0dd17c2fe52c646a82e3b2814a61c93e"><div class="ttname"><a href="itra__calc_8c.html#a0dd17c2fe52c646a82e3b2814a61c93e">find_shortest_path</a></div><div class="ttdeci">void find_shortest_path(point_list *root, point_list *points_head)</div><div class="ttdoc">Main function responsible for Dijkstra and finding shortest path.</div><div class="ttdef"><b>Definition</b> itra_calc.c:760</div></div>
<div class="ttc" id="aitra__calc_8c_html_a5d724ff30124b3ce91f377afb4598ed7"><div class="ttname"><a href="itra__calc_8c.html#a5d724ff30124b3ce91f377afb4598ed7">INFO_COLOR</a></div><div class="ttdeci">#define INFO_COLOR</div><div class="ttdoc">Bold style ANSI escape code for all other outputs.</div><div class="ttdef"><b>Definition</b> itra_calc.c:22</div></div>
<div class="ttc" id="aitra__calc_8c_html_a8e6ecd81efb77ff5f16afb571c452bed"><div class="ttname"><a href="itra__calc_8c.html#a8e6ecd81efb77ff5f16afb571c452bed">nearest_point</a></div><div class="ttdeci">point_list * nearest_point(point point, point_list *head)</div><div class="ttdoc">Looks up nearest point in the graph (on the map) to the provided point.</div><div class="ttdef"><b>Definition</b> itra_calc.c:611</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a02434d9cbacdb757bbce7d8d872bc5d8">calculateDistance()</a>, <a class="el" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points()</a>, <a class="el" href="structpoint.html#accf93555161c9eedf006462a228af523">point::dist</a>, <a class="el" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a>, <a class="el" href="itra__calc_8c.html#a0dd17c2fe52c646a82e3b2814a61c93e">find_shortest_path()</a>, <a class="el" href="itra__calc_8c.html#a5d724ff30124b3ce91f377afb4598ed7">INFO_COLOR</a>, <a class="el" href="structpoint.html#a8bc8844c4a53e08c58518895a243624d">point::itra</a>, <a class="el" href="structpoint.html#a0411d69bda51bd8c227133e24084e1ab">point::location</a>, <a class="el" href="itra__calc_8c.html#a8e6ecd81efb77ff5f16afb571c452bed">nearest_point()</a>, and <a class="el" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>.</p>

</div>
</div>
<a id="a41b2601c2b12d651a189170508c975a2" name="a41b2601c2b12d651a189170508c975a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41b2601c2b12d651a189170508c975a2">&#9670;&#160;</a></span>read_nodes_from_route()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_nodes_from_route </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>route</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>track</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>idcnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads nodes from corresponding route file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Pointer to the sentinel of the linked list of points. </td></tr>
    <tr><td class="paramname">route</td><td>Route .gpx extension xml file. Has coordinates of intersections (and some more BUT not all points). </td></tr>
    <tr><td class="paramname">track</td><td>Track .gpx extension xml file. Has coordinates and elevation data. </td></tr>
    <tr><td class="paramname">track</td><td>Track .gpx extension xml file. Has coordinates and elevation data. </td></tr>
    <tr><td class="paramname">idcnt</td><td>Counter for assigning id to newly read points in <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>track.gpx must must contain the correct gps location information. </dd>
<dd>
route.gpx must must contain the correct gps location information. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of nodes read from the current file (useful for debugging). </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Return value 0 indicates that no nodes were read, hence an error must have occured. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  441</span>{</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordtype">int</span> nodes_read = 0;</div>
<div class="line"><span class="lineno">  443</span>    <span class="keywordtype">char</span> buffer[BUFFER_SIZE];</div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordtype">double</span> lat, lon;</div>
<div class="line"><span class="lineno">  445</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *lastelem = head, *curelem;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>    <span class="comment">/* Seek to the end of point_list */</span></div>
<div class="line"><span class="lineno">  448</span>    <span class="keywordflow">while</span> (lastelem-&gt;next != NULL)</div>
<div class="line"><span class="lineno">  449</span>        lastelem = lastelem-&gt;next;</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordflow">while</span> (1)</div>
<div class="line"><span class="lineno">  452</span>    {</div>
<div class="line"><span class="lineno">  453</span>        <span class="keywordflow">if</span> (feof(route))</div>
<div class="line"><span class="lineno">  454</span>        {</div>
<div class="line"><span class="lineno">  455</span>            <span class="keywordflow">return</span> nodes_read;</div>
<div class="line"><span class="lineno">  456</span>        }</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>        <span class="comment">/* Read from file line-by-line until a node is found */</span></div>
<div class="line"><span class="lineno">  459</span>        fgets(buffer, BUFFER_SIZE, route);</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">if</span> (sscanf(buffer, <span class="stringliteral">&quot;&lt;rtept lat=\&quot;%lf\&quot; lon=\&quot;%lf\&quot;&quot;</span>, &amp;lat, &amp;lon) == 2)</div>
<div class="line"><span class="lineno">  461</span>        {</div>
<div class="line"><span class="lineno">  462</span>            curelem = malloc(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpoint__list.html">point_list</a>));</div>
<div class="line"><span class="lineno">  463</span>            <span class="keywordflow">if</span> (curelem == NULL)</div>
<div class="line"><span class="lineno">  464</span>            {</div>
<div class="line"><span class="lineno">  465</span>                fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_nodes_from_route: Couldn&#39;t allocate a point&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  466</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  467</span>            }</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>            <span class="comment">/* Set id */</span></div>
<div class="line"><span class="lineno">  470</span>            curelem-&gt;point.id = *idcnt;</div>
<div class="line"><span class="lineno">  471</span>            (*idcnt)++;</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>            <span class="comment">/* Set nodes data to read data (lat, lon) */</span></div>
<div class="line"><span class="lineno">  474</span>            curelem-&gt;point.location.lat = lat;</div>
<div class="line"><span class="lineno">  475</span>            curelem-&gt;point.location.lon = lon;</div>
<div class="line"><span class="lineno">  476</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="itra__calc_8c.html#a560f5c80548ae92bc99fc84f2401f4dc">get_elevation</a>(curelem, track))</div>
<div class="line"><span class="lineno">  477</span>            {</div>
<div class="line"><span class="lineno">  478</span>                fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_nodes_from_route: Couldn&#39;t get elevation for point #%lld&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, *(idcnt--));</div>
<div class="line"><span class="lineno">  479</span>                free(curelem);</div>
<div class="line"><span class="lineno">  480</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  481</span>            }</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span>            <span class="comment">/* Stitch in list (keep lastelem for add_edges_in) */</span></div>
<div class="line"><span class="lineno">  484</span>            lastelem-&gt;next = curelem;</div>
<div class="line"><span class="lineno">  485</span>            curelem-&gt;next = NULL;</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>            <span class="comment">/* Setup edges_in list */</span></div>
<div class="line"><span class="lineno">  488</span>            curelem-&gt;point.edges_in = NULL;</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>            <span class="comment">/* Set ITRA &amp; distance for Dijkstra*/</span></div>
<div class="line"><span class="lineno">  491</span>            curelem-&gt;point.itra = 0;</div>
<div class="line"><span class="lineno">  492</span>            curelem-&gt;point.dist = -1.0;</div>
<div class="line"><span class="lineno">  493</span>            curelem-&gt;point.visited = 0;</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>            <span class="comment">/* Set return value */</span></div>
<div class="line"><span class="lineno">  496</span>            nodes_read++;</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="itra__calc_8c.html#a4e372ab720467c0b31df14394f5837b5">add_edge_in</a>(curelem, lastelem, head, track))</div>
<div class="line"><span class="lineno">  499</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>            <span class="comment">/* Order list (if curelem was alreadyy read, merge the two elements) */</span></div>
<div class="line"><span class="lineno">  502</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="itra__calc_8c.html#aa0a9220ddb43b425386a06c720d6b6e9">order_list</a>(head))</div>
<div class="line"><span class="lineno">  503</span>                (*idcnt)--;</div>
<div class="line"><span class="lineno">  504</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  505</span>                <span class="comment">/* Set lastelem to curelem */</span></div>
<div class="line"><span class="lineno">  506</span>                lastelem = curelem;</div>
<div class="line"><span class="lineno">  507</span>        }</div>
<div class="line"><span class="lineno">  508</span>    }</div>
<div class="line"><span class="lineno">  509</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a4e372ab720467c0b31df14394f5837b5"><div class="ttname"><a href="itra__calc_8c.html#a4e372ab720467c0b31df14394f5837b5">add_edge_in</a></div><div class="ttdeci">int add_edge_in(point_list *to, point_list *from, point_list *head, FILE *track)</div><div class="ttdoc">Add edges from and to neighbouring intersections (points, nodes).</div><div class="ttdef"><b>Definition</b> itra_calc.c:316</div></div>
<div class="ttc" id="aitra__calc_8c_html_a560f5c80548ae92bc99fc84f2401f4dc"><div class="ttname"><a href="itra__calc_8c.html#a560f5c80548ae92bc99fc84f2401f4dc">get_elevation</a></div><div class="ttdeci">int get_elevation(point_list *to_get, FILE *track)</div><div class="ttdoc">Look up elevation for point_list to_get in FILE track.</div><div class="ttdef"><b>Definition</b> itra_calc.c:278</div></div>
<div class="ttc" id="aitra__calc_8c_html_aa0a9220ddb43b425386a06c720d6b6e9"><div class="ttname"><a href="itra__calc_8c.html#aa0a9220ddb43b425386a06c720d6b6e9">order_list</a></div><div class="ttdeci">int order_list(point_list *head)</div><div class="ttdoc">Merge two elements in the list if they represent the same location.</div><div class="ttdef"><b>Definition</b> itra_calc.c:195</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a4e372ab720467c0b31df14394f5837b5">add_edge_in()</a>, <a class="el" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a>, <a class="el" href="itra__calc_8c.html#a560f5c80548ae92bc99fc84f2401f4dc">get_elevation()</a>, <a class="el" href="itra__calc_8c.html#aa0a9220ddb43b425386a06c720d6b6e9">order_list()</a>, and <a class="el" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>.</p>

</div>
</div>
<a id="af13812af799221713099f955dd7025f4" name="af13812af799221713099f955dd7025f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af13812af799221713099f955dd7025f4">&#9670;&#160;</a></span>read_points()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint__list.html">point_list</a> * read_points </td>
          <td>(</td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>files</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>number_routes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function responsible for creating map. </p>
<p>Reads points into a sentinel guarded linked list of <a class="el" href="structpoint__list.html" title="List for points (nodes)">point_list</a>. Responsible for opening files, creating node points (getting location and elevation data for them).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">files</td><td>Pointer to an array of strings containing route and file names in pairs. </td></tr>
    <tr><td class="paramname">number_routes</td><td>The number of trails user provided with .gpx files. Since each route requires two files (route.gpx and track.gpx), number_routes is the number of files / 2.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>route.gpx and track.gpx files must follow in this exact order. </dd>
<dd>
Each route.gpx must have a corresponding track.gpx! </dd>
<dd>
Strings containing the file names must contain .gpx extension too! </dd>
<dd>
track.gpx must must contain the correct gps location information. </dd>
<dd>
route.gpx must must contain the correct gps location information. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Head pointer for sentinel-guarded linked list of all nodes of the graph (points on the map). </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns NULL if error occured. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  530</span>{</div>
<div class="line"><span class="lineno">  531</span>    <span class="keywordflow">if</span> (number_routes == 0)</div>
<div class="line"><span class="lineno">  532</span>    {</div>
<div class="line"><span class="lineno">  533</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_points: No files specified&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  534</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  535</span>    }</div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span>    <span class="comment">/* Setting up sentinel to list*/</span></div>
<div class="line"><span class="lineno">  538</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *head = malloc(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpoint__list.html">point_list</a>));</div>
<div class="line"><span class="lineno">  539</span>    <span class="keywordflow">if</span> (head == NULL)</div>
<div class="line"><span class="lineno">  540</span>    {</div>
<div class="line"><span class="lineno">  541</span>        fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_points: Couldn&#39;t allocate points head&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  542</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  543</span>    }</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>    head-&gt;point.<a class="code hl_variable" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">edges_in</a> = NULL;</div>
<div class="line"><span class="lineno">  546</span>    head-&gt;next = NULL;</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>    FILE *route, *track;</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>    <span class="comment">/* Setting up linked list of points */</span></div>
<div class="line"><span class="lineno">  551</span>    <span class="keywordtype">size_t</span> idcnt = 0;</div>
<div class="line"><span class="lineno">  552</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; number_routes * 2;)</div>
<div class="line"><span class="lineno">  553</span>    {</div>
<div class="line"><span class="lineno">  554</span>        <span class="comment">/* Opening route and track file */</span></div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>        printf(<a class="code hl_define" href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a> <span class="stringliteral">&quot;\nReading: %s ... &quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, files[i]);</div>
<div class="line"><span class="lineno">  557</span>        route = fopen(files[i], <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  558</span>        <span class="keywordflow">if</span> (route == NULL)</div>
<div class="line"><span class="lineno">  559</span>        {</div>
<div class="line"><span class="lineno">  560</span>            fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_points: Couldn&#39;t open file %s&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, files[i]);</div>
<div class="line"><span class="lineno">  561</span>            <span class="keywordflow">if</span> (strstr(files[i], <span class="stringliteral">&quot;.gpx&quot;</span>) == NULL)</div>
<div class="line"><span class="lineno">  562</span>                fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_points: %s doesn&#39;t have .gpx extension.&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, files[i]);</div>
<div class="line"><span class="lineno">  563</span>            <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;head);</div>
<div class="line"><span class="lineno">  564</span>            <span class="keywordflow">return</span> head;</div>
<div class="line"><span class="lineno">  565</span>        }</div>
<div class="line"><span class="lineno">  566</span>        printf(<a class="code hl_define" href="itra__calc_8c.html#ac4bdeb73d33895bb745d17b3d8539a6a">GREEN_COLOR</a> <span class="stringliteral">&quot;done&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  567</span>        i++;</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>        printf(<a class="code hl_define" href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a> <span class="stringliteral">&quot;\nReading: %s ... &quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, files[i]);</div>
<div class="line"><span class="lineno">  570</span>        track = fopen(files[i], <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  571</span>        <span class="keywordflow">if</span> (track == NULL)</div>
<div class="line"><span class="lineno">  572</span>        {</div>
<div class="line"><span class="lineno">  573</span>            fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_points: Couldn&#39;t open file %s&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, files[i]);</div>
<div class="line"><span class="lineno">  574</span>            <span class="keywordflow">if</span> (strstr(files[i], <span class="stringliteral">&quot;.gpx&quot;</span>) == NULL)</div>
<div class="line"><span class="lineno">  575</span>                fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_points: %s doesn&#39;t have .gpx extension.&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, files[i]);</div>
<div class="line"><span class="lineno">  576</span>            <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;head);</div>
<div class="line"><span class="lineno">  577</span>            fclose(route);</div>
<div class="line"><span class="lineno">  578</span>            <span class="keywordflow">return</span> head;</div>
<div class="line"><span class="lineno">  579</span>        }</div>
<div class="line"><span class="lineno">  580</span>        printf(<a class="code hl_define" href="itra__calc_8c.html#ac4bdeb73d33895bb745d17b3d8539a6a">GREEN_COLOR</a> <span class="stringliteral">&quot;done&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>);</div>
<div class="line"><span class="lineno">  581</span>        i++;</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>        <span class="comment">/* Stitching nodes from route file in node list */</span></div>
<div class="line"><span class="lineno">  584</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="itra__calc_8c.html#a41b2601c2b12d651a189170508c975a2">read_nodes_from_route</a>(head, route, track, &amp;idcnt))</div>
<div class="line"><span class="lineno">  585</span>        {</div>
<div class="line"><span class="lineno">  586</span>            fclose(track);</div>
<div class="line"><span class="lineno">  587</span>            fclose(route);</div>
<div class="line"><span class="lineno">  588</span>            <a class="code hl_function" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points</a>(&amp;head);</div>
<div class="line"><span class="lineno">  589</span>            fprintf(stderr, <a class="code hl_define" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a> <span class="stringliteral">&quot;\nError read_points: read_nodes_from_route failed with files %s, %s&quot;</span> <a class="code hl_define" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, files[i - 2], files[i - 1]);</div>
<div class="line"><span class="lineno">  590</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  591</span>        }</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>        fclose(track);</div>
<div class="line"><span class="lineno">  594</span>        fclose(route);</div>
<div class="line"><span class="lineno">  595</span>    }</div>
<div class="line"><span class="lineno">  596</span>    <span class="keywordflow">return</span> head;</div>
<div class="line"><span class="lineno">  597</span>}</div>
<div class="ttc" id="aitra__calc_8c_html_a41b2601c2b12d651a189170508c975a2"><div class="ttname"><a href="itra__calc_8c.html#a41b2601c2b12d651a189170508c975a2">read_nodes_from_route</a></div><div class="ttdeci">int read_nodes_from_route(point_list *head, FILE *route, FILE *track, size_t *idcnt)</div><div class="ttdoc">Reads nodes from corresponding route file.</div><div class="ttdef"><b>Definition</b> itra_calc.c:440</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itra__calc_8c.html#a777592a0ad74f6572c8f106ebad69025">destroy_points()</a>, <a class="el" href="structpoint.html#a008608f32b9f83b47ded9b43d6bff4af">point::edges_in</a>, <a class="el" href="itra__calc_8c.html#a59be80d1d80fc8a9dbfe8d823dbbac74">ERR_COLOR</a>, <a class="el" href="itra__calc_8c.html#ac4bdeb73d33895bb745d17b3d8539a6a">GREEN_COLOR</a>, <a class="el" href="itra__calc_8c.html#a41b2601c2b12d651a189170508c975a2">read_nodes_from_route()</a>, <a class="el" href="itra__calc_8c.html#ad7c3b975e5552a122f836b02fa138502">RESET_COLOR</a>, and <a class="el" href="itra__calc_8c.html#ade48c7e2e47b62c4ba5b651a8fce44d7">WARN_COLOR</a>.</p>

</div>
</div>
<a id="af41632d84b5bd81f642bd5680f224bb0" name="af41632d84b5bd81f642bd5680f224bb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af41632d84b5bd81f642bd5680f224bb0">&#9670;&#160;</a></span>set_smallest_visited()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_smallest_visited </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpoint__list.html">point_list</a> *&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets point_list-&gt;<a class="el" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">point.visited</a> 1 for the point with the smallest distance from start which is not visited yet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Pointer to the sentinel of the linked list of points. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  725</span>{</div>
<div class="line"><span class="lineno">  726</span>    head = head-&gt;next;</div>
<div class="line"><span class="lineno">  727</span>    <a class="code hl_struct" href="structpoint__list.html">point_list</a> *smallest = NULL;</div>
<div class="line"><span class="lineno">  728</span> </div>
<div class="line"><span class="lineno">  729</span>    <span class="comment">/* Search for smallest distance point */</span></div>
<div class="line"><span class="lineno">  730</span>    <span class="keywordflow">while</span> (head != NULL)</div>
<div class="line"><span class="lineno">  731</span>    {</div>
<div class="line"><span class="lineno">  732</span>        <span class="comment">/* IF</span></div>
<div class="line"><span class="lineno">  733</span><span class="comment">                    smallest has been not set yet (smallest == NULL)</span></div>
<div class="line"><span class="lineno">  734</span><span class="comment">                    OR</span></div>
<div class="line"><span class="lineno">  735</span><span class="comment">                    the distance of the current point is smaller than the current smallest distance (head-&gt;point.dist &lt; smallest-&gt;point.dist)</span></div>
<div class="line"><span class="lineno">  736</span><span class="comment">                AND</span></div>
<div class="line"><span class="lineno">  737</span><span class="comment">                the points distance is not infinity (represented by -1) (head-&gt;point.dist &gt; 0)</span></div>
<div class="line"><span class="lineno">  738</span><span class="comment">            AND</span></div>
<div class="line"><span class="lineno">  739</span><span class="comment">            point is not visited (head-&gt;point.visited == 0)</span></div>
<div class="line"><span class="lineno">  740</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  741</span>        <span class="keywordflow">if</span> (((smallest == NULL || head-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> &lt; smallest-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a>) &amp;&amp; head-&gt;point.<a class="code hl_variable" href="structpoint.html#accf93555161c9eedf006462a228af523">dist</a> &gt; 0) &amp;&amp; head-&gt;point.<a class="code hl_variable" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> == 0)</div>
<div class="line"><span class="lineno">  742</span>            smallest = head;</div>
<div class="line"><span class="lineno">  743</span>        head = head-&gt;next;</div>
<div class="line"><span class="lineno">  744</span>    }</div>
<div class="line"><span class="lineno">  745</span> </div>
<div class="line"><span class="lineno">  746</span>    <span class="comment">/* If smallest was actually found set visited 1 */</span></div>
<div class="line"><span class="lineno">  747</span>    <span class="keywordflow">if</span> (smallest != NULL)</div>
<div class="line"><span class="lineno">  748</span>        smallest-&gt;point.<a class="code hl_variable" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> = 1;</div>
<div class="line"><span class="lineno">  749</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpoint.html#accf93555161c9eedf006462a228af523">point::dist</a>, and <a class="el" href="structpoint.html#a4b66973fd0abdd396e7c9af5f52a9600">point::visited</a>.</p>

</div>
</div>
<a id="a386f4a2407dc7273907be947bd947e08" name="a386f4a2407dc7273907be947bd947e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386f4a2407dc7273907be947bd947e08">&#9670;&#160;</a></span>toRadians()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double toRadians </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>degree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert degrees to radians. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">degree</td><td>Angle in degrees. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Angle in radians. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  242</span>{</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">return</span> degree * (3.14 / 180.0);</div>
<div class="line"><span class="lineno">  244</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_23fdee2f6995db16c755697cdf620cf4.html">Code</a></li><li class="navelem"><a class="el" href="itra__calc_8c.html">itra_calc.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
